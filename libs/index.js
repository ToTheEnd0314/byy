function e(e){console.error("Moon Error:\n"+e)}function t(e){return"[object Object]"===Object.prototype.toString.call(e)}function n(e){return"[object String]"===Object.prototype.toString.call(e)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var o=function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function r(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw TypeError("Bind must be called on a function");var t=Array.prototype.slice.call(arguments,1),n=this,o=function(){},r=function(){return n.apply(this instanceof o?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(o.prototype=this.prototype),r.prototype=new o,r}),Array.isArray||(Array.isArray=function(e){return Boolean(e&&"[object Array]"===Object.prototype.toString.call(Object(e)))}),Array.prototype.find||(Array.prototype.find=function(e){var t;if(e){for(var n=this,o=0;o<n.length;o++)if(e(n[o],o)){t=n[o];break}}else console.error("[Find]: params[0] is invalid");return t}),Array.prototype.findIndex||(Array.prototype.findIndex=function(e){var t=-1;if(e){for(var n=0;n<this.length;n++)if(e(this[n],n)){t=n;break}}else console.error("[FindIndex]: params[0] is invalid");return t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)t.push(n);return t}),Array.prototype.map||(Array.prototype.map=function(e){for(var t=[],n=this.slice(0),o=0;o<n.length;o++)t.push(e(n[o],o,n));return t}),Array.prototype.filter||(Array.prototype.filter=function(e){for(var t=[],n=this.slice(0),o=0;o<n.length;o++)e(n[o],o)&&t.push(n[o]);return t}),"function"!=typeof Object.assign&&(Object.assign=function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),o=1;o<arguments.length;o++){var r=arguments[o];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n}),Array.prototype.reduce||(Array.prototype.reduce=function(e){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,n=Object(this),o=n.length>>>0,r=0;if(arguments.length>=2)t=arguments[1];else{for(;r<o&&!(r in n);)r++;if(r>=o)throw new TypeError("Reduce of empty array with no initial value");t=n[r++]}for(;r<o;)r in n&&(t=e(t,n[r],r,n)),r++;return t}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),r=o.length>>>0;if(0===r)return-1;var i=+t||0;if(Math.abs(i)===Infinity&&(i=0),i>=r)return-1;for(n=Math.max(i>=0?i:r-Math.abs(i),0);n<r;){if(n in o&&o[n]===e)return n;n++}return-1});var i={stop:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},prevent:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}};function s(e,t){for(var n in t)e.style.setAttribute?e.style.setAttribute(n,t[n]):e.style[n]=t[n]}function a(o,r,a){var p=function(p){"className"===p?t(r[p])?o[p]=Object.keys(r[p]).filter((function(e){return r[p][e]})).join(" "):n(r[p])?o[p]=r[p]:e("The className must be string or object"):"on"===p?function(e,t,n){var o=function(o){var r=o.split("."),s=r[0],a=r[1],p=t[o],c=p[0],l=p.slice(1);e["on"+s]=null,e["on"+s]=function(e){var t=e||window.event;a&&i[a]&&i[a](t),l=l.reduce((function(e,n){return"$event"===n?e.push(t):e.push(n),e}),[]),c.apply(n,l)}};for(var r in t)o(r)}(o,r[p],a):"style"===p?s(o,r[p]):"component"!==p&&"nodeType"!==p&&"children"!==p&&"tag"!==p&&(o[p]=r[p])};for(var c in r)p(c)}function p(e,t,n){var o=h(e,t,"0");o&&function(e,t,n,o){for(var r in e){var i=c(t.$el,r);for(var a in e[r]){if("props"===a)l(o,r)._updateChildComponent(e[r][a]);else if("style"===a)s(i,e[r][a]);else if("replace"===a);else if("add"===a)for(var p=0,h=e[r][a];p<h.length;p++){var d=h[p];"component"===d.nodeType?(d.component=new u(d.component,t),i.appendChild(d.component.$el)):i.appendChild(t._createElement(d))}else if("remove"===a)for(var f=0;f<e[r][a];f++){var y=i.childNodes[i.childNodes.length-1];i.removeChild(y)}else"delete"===a?i.parentNode.removeChild(i.parentNode):i[a]=e[r][a]}}}(o,n,0,t)}function c(e,t){for(var n=t.split("-"),o=1;o<n.length;o++)e=e.childNodes[n[o]];return e}function l(e,t){for(var n=t.split("-"),o=e,r=1;r<n.length;r++)o=o.children[n[r]];return o.component}function h(e,t,o){var i={},s=(e.on,e.bind,e.children),a=e.nodeType,p=e.tag,c=e.nodeValue,l=(e.component,r(e,["on","bind","children","nodeType","tag","nodeValue","component"])),u=(t.on,t.bind,t.children),d=t.nodeType,f=t.tag,y=t.nodeValue,v=(t.component,r(t,["on","bind","children","nodeType","tag","nodeValue","component"])),m=function(e,t,n){var o={};if(e&&!t)o[n]=Object.assign({},o[n],{add:[e]});else if(t&&!e)o[n]=Object.assign({},o[n],{"delete":!0});else if(e&&t){e.length>t.length?(o[n]=Object.assign({},o[n],{add:e.slice(t.length-e.length)}),e=e.slice(0,t.length-e.length)):e.length<t.length&&(o[n]=Object.assign({},o[n],{remove:t.length-e.length}));for(var r=0;r<e.length;r++){var i=h(e[r],t[r],n+"-"+r);i&&(o=Object.assign({},o,i))}}return Object.keys(o).length>0?o:null}(s,u,o);return i[o]=function(e,t){var o={},r=function(r){var i,s;if(n(e[r]))o=Object.assign({},o,((i={})[r]=e[r],i));else if("className"===r)o[r]=Object.keys(e[r]).reduce((function(t,n){return e[r][n]&&(t+=" "+n),t}),"").slice(1);else for(var a in e[r])e[r][a]!==t[r][a]&&(o[r]=Object.assign({},o[r],((s={})[a]=e[r][a],s)))};for(var i in e)r(i);return Object.keys(o).length>0?o:null}(l,v),m&&(i=Object.assign({},i,m)),a!==d||p!==f?i[o]=Object.assign({},i[o],{repalce:e}):c!==y&&(i[o]=Object.assign({},i[o],{nodeValue:c})),Object.keys(i).length>0?i:null}var u=function(){function e(e,t){this.components=e.components,this.data=e.data,this.props=e.props,this.render=e.render,this.methods=e.methods,this.watch=e.watch,this.mounted=e.mounted,this.name=e.name,this._binds={},this.$el,this._updateTimer=null,t&&(this.$parent=t),this._createComponent()}return e.prototype.$get=function(e){var n,o;return n=this.data&&(this.data[e]||0===this.data[e]||!1===this.data[e]||""===this.data[e])?this.data[e]:this.props&&(this.props[e]||0===this.props[e]||!1===this.props[e]||""===this.props[e])?this.props[e]:undefined,o=n,"[object Array]"===Object.prototype.toString.call(o)?n=n.slice(0):t(n)&&(n=Object.assign({},n)),n},e.prototype.$set=function(e,t){var n=this;this.data[e]!==t&&(this.data[e]=t,clearTimeout(this._updateTimer),this._updateTimer=setTimeout((function(){var e=n.render(n._createVnode.bind(n));p(e,n._vNode,n),n._updateVNode(e),n._vNode=e}),0))},e.prototype.$emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.$parent._binds[e]&&this.$parent._binds[e].apply(this.$parent,t)},e.prototype._updateVNode=function(t){for(var n=0;n<t.children.length;n++)"component"===t.children[n].nodeType&&(t.children[n].component instanceof e||(t.children[n].component=this._vNode.children[n].component));return t},e.prototype._createElement=function(t){var n;if(1===t.nodeType?n=document.createElement(t.tag):3===t.nodeType?n=document.createTextNode(t.nodeValue):(t.component=new e(t.component,this),n=t.component.$el),t.children)for(var o=0,r=t.children;o<r.length;o++){var i=r[o];n.appendChild(this._createElement(i))}return s(n,t.style),a(n,t,this),n},e.prototype._createVnode=function(e,n,r){var i,s=[],a=1;if(this.components&&this.components[e]){if(i=this.__deepClone(this.components[e]),n&&(n.props&&i.props&&(i.props=Object.assign(i.props,n.props)),n.bind))for(var p in n.bind)this._binds[p]=n.bind[p];a="component"}return r&&r.length>0&&(s=r.reduce((function(e,n){return t(n)?e.push(n):e.push({nodeType:3,nodeValue:n}),e}),[])),o(o({tag:e,children:s},n),{component:i,nodeType:a})},e.prototype._updateChildComponent=function(e){this.props=Object.assign(this.props,e),p(this.render(this._createVnode.bind(this)),this._vNode,this)},e.prototype.__deepClone=function(n){var o={};for(var r in n)n.hasOwnProperty(r)&&(!t(n[r])||n[r]instanceof e?o[r]=n[r]:o[r]=this.__deepClone(n[r]));return o},e.prototype.__transferMethods=function(){Object.assign(this,o({},this.methods))},e.prototype._createComponent=function(){this.__transferMethods(),this._vNode=this.render(this._createVnode.bind(this)),this.$el=this._createElement(this._vNode)},e}(),d=function(){function n(e){this.$options=Object.assign({el:"app",$el:null,render:null,autoRender:!0},e),this._vm,this.$options.name||this._init("byy")}return n.prototype._init=function(t){"byy"===t?this.$options.render(this._render.bind(this,"byy")):e("The function named [_init] is a inner function, you can't call it directly")},n.prototype._triggerMounter=function(e){e.mounted&&e.mounted();var t=e._vNode,n=t.children;if("component"===t.nodeType&&t.component.mounted&&t.component.mounted(),n)for(var o=0,r=n;o<r.length;o++){var i=r[o];"component"===i.nodeType&&this._triggerMounter(i.component)}},n.prototype._render=function(n,o){"byy"===n?t(o)?(this.$options.$el=document.querySelector(this.$options.el||this.$options.el),this._vm=new u(o),this.$options.$el.appendChild(this._vm.$el),this._triggerMounter(this._vm)):e("You must init Moon with a component"):e("The function named [_render] is a inner function, you can't call it directly")},n}();export default d;
